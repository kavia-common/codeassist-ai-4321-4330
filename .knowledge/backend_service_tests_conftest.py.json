{"is_source_file": true, "format": "Python", "description": "Test fixture setup for backend service using pytest; sets environment variables, mocks OpenAI API responses, and provides test client for API testing.", "external_files": ["src/api/main.py", "httpx"], "external_methods": ["pytest.fixture", "monkeypatch.setenv", "TestClient"], "published": [], "classes": [{"name": "_DummyHTTPXResponse", "description": "A dummy response class to simulate httpx response objects in tests."}], "methods": [{"name": "_env_setup(monkeypatch)", "description": "Configures environment variables before tests run.", "scope": "", "scopeKind": ""}, {"name": "app_client()", "description": "Creates and returns a test client instance for API testing.", "scope": "", "scopeKind": ""}, {"name": "openai_success_response()", "description": "Returns a mocked successful OpenAI API response.", "scope": "", "scopeKind": ""}, {"name": "openai_error_response()", "description": "Returns a mocked error response from OpenAI API.", "scope": "", "scopeKind": ""}, {"name": "_DummyHTTPXResponse.__init__", "description": "Initializes dummy response with status code, json data, and text data."}, {"name": "_DummyHTTPXResponse.json", "description": "Returns the JSON data or raises JSONDecodeError if none is set."}, {"name": "_DummyHTTPXResponse.headers", "description": "Returns response headers."}, {"name": "mock_openai(monkeypatch, openai_success_response)", "description": "Monkeypatches httpx.AsyncClient.post to prevent real network calls and allows setting mock responses.", "scope": "", "scopeKind": ""}, {"name": "__aenter__(self)", "scope": "mock_openai._DummyAsyncClient", "scopeKind": "class", "description": "unavailable"}, {"name": "__aexit__(self, exc_type, exc, tb)", "scope": "mock_openai._DummyAsyncClient", "scopeKind": "class", "description": "unavailable"}, {"name": "__init__(self, *args, **kwargs)", "scope": "mock_openai._DummyAsyncClient", "scopeKind": "class", "description": "unavailable"}, {"name": "__init__(self, status_code=200, json_data=None, text_data=\"\")", "scope": "_DummyHTTPXResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "headers(self)", "scope": "_DummyHTTPXResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "json(self)", "scope": "_DummyHTTPXResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "post(self, url, headers=None, json=None)", "scope": "mock_openai._DummyAsyncClient", "scopeKind": "class", "description": "unavailable"}, {"name": "set_response(resp)", "scope": "mock_openai", "scopeKind": "function", "description": "unavailable"}], "calls": ["monkeypatch.setenv", "TestClient(app)", "httpx.AsyncClient"], "search-terms": ["conftest", "pytest fixtures", "mock OpenAI API", "test client setup", "environment variable mocking"], "state": 2, "file_id": 8, "knowledge_revision": 36, "git_revision": "", "revision_history": [{"28": ""}, {"36": ""}], "ctags": [{"_type": "tag", "name": "_DummyAsyncClient", "path": "/home/kavia/workspace/code-generation/codeassist-ai-4321-4330/backend_service/tests/conftest.py", "pattern": "/^    class _DummyAsyncClient:$/", "file": true, "language": "Python", "kind": "class", "scope": "mock_openai", "scopeKind": "function"}, {"_type": "tag", "name": "_DummyHTTPXResponse", "path": "/home/kavia/workspace/code-generation/codeassist-ai-4321-4330/backend_service/tests/conftest.py", "pattern": "/^class _DummyHTTPXResponse:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__aenter__", "path": "/home/kavia/workspace/code-generation/codeassist-ai-4321-4330/backend_service/tests/conftest.py", "pattern": "/^        async def __aenter__(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "mock_openai._DummyAsyncClient", "scopeKind": "class"}, {"_type": "tag", "name": "__aexit__", "path": "/home/kavia/workspace/code-generation/codeassist-ai-4321-4330/backend_service/tests/conftest.py", "pattern": "/^        async def __aexit__(self, exc_type, exc, tb):$/", "language": "Python", "kind": "member", "signature": "(self, exc_type, exc, tb)", "scope": "mock_openai._DummyAsyncClient", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/codeassist-ai-4321-4330/backend_service/tests/conftest.py", "pattern": "/^        def __init__(self, *args, **kwargs):$/", "language": "Python", "kind": "member", "signature": "(self, *args, **kwargs)", "scope": "mock_openai._DummyAsyncClient", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/codeassist-ai-4321-4330/backend_service/tests/conftest.py", "pattern": "/^    def __init__(self, status_code=200, json_data=None, text_data=\"\"):$/", "language": "Python", "kind": "member", "signature": "(self, status_code=200, json_data=None, text_data=\"\")", "scope": "_DummyHTTPXResponse", "scopeKind": "class"}, {"_type": "tag", "name": "_env_setup", "path": "/home/kavia/workspace/code-generation/codeassist-ai-4321-4330/backend_service/tests/conftest.py", "pattern": "/^def _env_setup(monkeypatch):$/", "language": "Python", "kind": "function", "signature": "(monkeypatch)"}, {"_type": "tag", "name": "app_client", "path": "/home/kavia/workspace/code-generation/codeassist-ai-4321-4330/backend_service/tests/conftest.py", "pattern": "/^def app_client():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "headers", "path": "/home/kavia/workspace/code-generation/codeassist-ai-4321-4330/backend_service/tests/conftest.py", "pattern": "/^    def headers(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "_DummyHTTPXResponse", "scopeKind": "class"}, {"_type": "tag", "name": "json", "path": "/home/kavia/workspace/code-generation/codeassist-ai-4321-4330/backend_service/tests/conftest.py", "pattern": "/^    def json(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "_DummyHTTPXResponse", "scopeKind": "class"}, {"_type": "tag", "name": "mock_openai", "path": "/home/kavia/workspace/code-generation/codeassist-ai-4321-4330/backend_service/tests/conftest.py", "pattern": "/^def mock_openai(monkeypatch, openai_success_response):$/", "language": "Python", "kind": "function", "signature": "(monkeypatch, openai_success_response)"}, {"_type": "tag", "name": "openai_error_response", "path": "/home/kavia/workspace/code-generation/codeassist-ai-4321-4330/backend_service/tests/conftest.py", "pattern": "/^def openai_error_response():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "openai_success_response", "path": "/home/kavia/workspace/code-generation/codeassist-ai-4321-4330/backend_service/tests/conftest.py", "pattern": "/^def openai_success_response():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "post", "path": "/home/kavia/workspace/code-generation/codeassist-ai-4321-4330/backend_service/tests/conftest.py", "pattern": "/^        async def post(self, url, headers=None, json=None):$/", "language": "Python", "kind": "member", "signature": "(self, url, headers=None, json=None)", "scope": "mock_openai._DummyAsyncClient", "scopeKind": "class"}, {"_type": "tag", "name": "set_response", "path": "/home/kavia/workspace/code-generation/codeassist-ai-4321-4330/backend_service/tests/conftest.py", "pattern": "/^    def set_response(resp):$/", "file": true, "language": "Python", "kind": "function", "signature": "(resp)", "scope": "mock_openai", "scopeKind": "function"}], "hash": "a50123da4b6fd878d7860c24bc2efe46", "format-version": 4, "code-base-name": "backend_service", "filename": "backend_service/tests/conftest.py"}